<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Descubra se voc√™ est√° inflamada</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #fff0f4 0%, #fffaf8 100%);
      margin: 0; padding: 20px; min-height: 100vh;
    }

    .container {
      max-width: 700px; background: white; margin: 0 auto; padding: 40px;
      border-radius: 20px; box-shadow: 0 10px 30px rgba(176,53,116,.1);
      position: relative; overflow: hidden;
    }
    .container::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px;
      background: linear-gradient(90deg, #b03574, #d4579a, #b03574); animation: shimmer 2s infinite;
    }
    @keyframes shimmer { 0%{transform:translateX(-100%)} 100%{transform:translateX(100%)} }

    .logo {
      display: block; margin: 0 auto 50px; max-width: 500px; height: 80px;
      background: linear-gradient(135deg, #b03574, #d4579a); border-radius: 12px;
      display: flex; align-items: center; justify-content: center; color: white;
      font-weight: 700; font-size: 18px;
    }

    .progress-container { margin-bottom: 30px; }
    .progress-bar { width: 100%; height: 8px; background: #f0f0f0; border-radius: 4px; overflow: hidden; margin-bottom: 10px; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #b03574, #d4579a); border-radius: 4px; transition: width .5s ease; width: 0%; }
    .progress-text { text-align: center; color: #b03574; font-weight: 600; font-size: 14px; }

    .section { display: none; animation: fadeInUp .6s ease; }
    .section.active { display: block; }
    @keyframes fadeInUp { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)} }

    h1 { text-align: center; color: #b03574; font-weight: 700; font-size: 2.2em; margin-bottom: 10px; }
    h2 { color: #b03574; font-weight: 600; font-size: 1.5em; margin-bottom: 20px; text-align: center; }
    .subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }

    .form-group { margin-bottom: 20px; }
    label { display: block; color: #333; font-weight: 500; margin-bottom: 8px; }
    input[type="text"], input[type="number"], select {
      width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; transition: border-color .3s ease;
    }
    input[type="text"]:focus, input[type="number"]:focus, select:focus { outline: none; border-color: #b03574; }

    .checkbox-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px; margin-bottom: 20px;
    }
    .checkbox-item {
      background: #fafafa; border: 2px solid #e0e0e0; border-radius: 10px; padding: 15px; cursor: pointer;
      transition: all .3s ease; position: relative;
    }
    .checkbox-item:hover { background: #fff0f4; border-color: #b03574; transform: translateY(-2px); }
    .checkbox-item.selected { background: linear-gradient(135deg, #b03574, #d4579a); color: white; border-color: #b03574; }
    .checkbox-item input { display: none; }
    .checkbox-item .checkmark {
      position: absolute; top: 10px; right: 10px; width: 20px; height: 20px; border: 2px solid #ddd; border-radius: 50%; transition: all .3s ease;
    }
    .checkbox-item.selected .checkmark { background: white; border-color: white; }
    .checkbox-item.selected .checkmark::after {
      content: '‚úì'; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: #b03574; font-weight: bold; font-size: 12px;
    }

    button {
      background: linear-gradient(135deg, #b03574, #d4579a); color: white; border: none; padding: 16px 32px; font-size: 16px; font-weight: 600;
      border-radius: 50px; width: 100%; margin-top: 20px; cursor: pointer; transition: all .3s ease;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(176,53,116,.3); }
    button:disabled { opacity: .6; cursor: not-allowed; transform: none; }

    .result {
      background: linear-gradient(135deg, #fff0f4, #fffaf8); border: 2px solid #b03574; border-radius: 15px; padding: 30px; margin-top: 30px;
      animation: fadeInUp .8s ease;
    }
    .result h3 { color: #b03574; font-size: 1.5em; margin-bottom: 15px; text-align: center; }
    .result-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #b03574; }

    .bridge { margin-top: 15px; }
    .bridge ul { margin: 12px 0 0; padding-left: 20px; }
    .bridge li { margin: 6px 0; }

    .programa-cta {
      background: linear-gradient(135deg, #b03574, #d4579a); color: white; border-radius: 15px; padding: 30px;
      text-align: left; margin-top: 30px; animation: pulse 2s infinite;
    }
    @keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.02)} 100%{transform:scale(1)} }
    .programa-cta .cta-inner { max-width: 620px; margin: 0 auto; }
    .programa-cta .cta-title { font-size: clamp(1.05rem, 4.5vw, 1.4rem); line-height: 1.35; margin: 0 0 14px 0; color: #fff; }
    .programa-cta .cta-title strong { font-weight: 800; }
    .programa-cta .cta-benefits { display: grid; gap: 10px; margin: 0 0 16px 0; padding: 0; list-style: none; }
    .programa-cta .cta-benefits li {
      display: grid; grid-template-columns: 22px 1fr; align-items: start; gap: 10px;
      padding: 10px 12px; border-radius: 12px; background: rgba(255,255,255,0.12);
    }
    .programa-cta .cta-benefits .icon { line-height: 1; font-size: 1rem; transform: translateY(2px); }
    .programa-cta .cta-button {
      display:inline-block; width: 100%; max-width: 520px; margin: 8px 0 0 0;
      background: #fff; color: #b03574; padding: 14px 18px; border-radius: 50px; text-decoration: none; font-weight: 700;
    }

    .app-share { text-align: center; margin-top: 18px; }
    .whatsapp-button {
      display: inline-block; text-decoration: none; font-weight: 600;
      background-color: #25D366; color: #fff; padding: 14px 18px; border-radius: 50px;
      box-shadow: 0 8px 20px rgba(37,211,102,.25);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .whatsapp-button:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(37,211,102,.35); }

    .alert-card {
      position: relative;
      margin-top: 22px;
      padding: 22px 20px 18px 20px;
      border-radius: 18px;
      background:
        linear-gradient(#ffffff, #ffffff) padding-box,
        linear-gradient(135deg, #ff6b9e, #ffb86b, #ff6b9e) border-box;
      border: 2px solid transparent;
      box-shadow: 0 12px 28px rgba(176,53,116,.18);
      animation: alertGlow 2.2s ease-in-out infinite;
    }
    @keyframes alertGlow {
      0%,100% { box-shadow: 0 10px 26px rgba(176,53,116,.18); }
      50% { box-shadow: 0 14px 32px rgba(212,87,154,.28); }
    }
    .alert-chip {
      position: absolute;
      top: -12px; left: 16px;
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(135deg, #b03574, #d4579a);
      color: #fff; font-weight: 700; font-size: 12px; letter-spacing: .5px;
      text-transform: uppercase;
      box-shadow: 0 6px 18px rgba(176,53,116,.25);
    }
    .alert-heading {
      margin: 6px 0 10px 0;
      color: #8b2b59;
      font-weight: 800;
      font-size: 1.15rem;
      display: flex; align-items: center; gap: 8px;
    }
    .alert-heading .icon { font-size: 1.2rem; line-height: 1; }
    .alert-list { margin: 6px 0 0 0; padding: 0; list-style: none; }
    .alert-list li {
      position: relative; padding-left: 30px; margin: 10px 0; line-height: 1.45; color: #4a1b32;
    }
    .alert-list li::before {
      content: "‚ö†Ô∏è"; position: absolute; left: 0; top: 0; transform: translateY(2px);
    }
    .alert-note {
      margin-top: 14px; font-size: .95rem; font-weight: 600; color: #6e2549;
      padding: 10px 12px; background: rgba(242,207,225,.35); border-left: 4px solid #b03574; border-radius: 12px;
    }

    @media (max-width: 768px) {
      .container { padding: 25px; margin: 10px; }
      .checkbox-grid { grid-template-columns: 1fr; }
      h1 { font-size: 1.8em; }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="logo">üå∏ Descubra se voc√™ est√° inflamada </div>

    <div class="progress-container">
      <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
      <div class="progress-text" id="progress-text">Etapa 1 de 5</div>
    </div>

    <!-- SE√á√ÉO 1: DADOS PESSOAIS -->
    <div class="section active" id="section-1">
      <h1>Preciso de algumas informa√ß√µes b√°sicas para personalizar sua avalia√ß√£o</h1>

      <div class="form-group">
        <label for="idade">Qual sua idade?</label>
        <input type="number" id="idade" min="18" max="100" placeholder="Ex: 35">
      </div>

      <div class="form-group">
        <label for="peso">Qual seu peso atual? (kg)</label>
        <input type="number" id="peso" step="0.1" placeholder="Ex: 65.5">
      </div>

      <div class="form-group">
        <label for="altura">Qual sua altura? (cm)</label>
        <input type="number" id="altura" placeholder="Ex: 165">
      </div>

      <button onclick="nextSection(1)">Continuar</button>
    </div>

    <!-- SE√á√ÉO 2: OBJETIVOS -->
    <div class="section" id="section-2">
      <h2>Quais s√£o seus maiores interesses?</h2>
      <p class="subtitle">Selecione todos os objetivos que fazem sentido para voc√™</p>

      <div class="checkbox-grid">
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Reduzir glicose no sangue"><div class="checkmark"></div><strong>Reduzir glicose no sangue</strong><small style="display:block;margin-top:5px;">Controlar diabetes e pr√©-diabetes</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Reduzir insulina"><div class="checkmark"></div><strong>Reduzir insulina</strong><small style="display:block;margin-top:5px;">Melhorar resist√™ncia insul√≠nica</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Longevidade"><div class="checkmark"></div><strong>Longevidade</strong><small style="display:block;margin-top:5px;">Envelhecer com sa√∫de e vitalidade</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Queimar gordura localizada"><div class="checkmark"></div><strong>Queimar gordura localizada</strong><small style="display:block;margin-top:5px;">Reduzir medidas espec√≠ficas</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Perder peso"><div class="checkmark"></div><strong>Perder peso</strong><small style="display:block;margin-top:5px;">Emagrecer de forma saud√°vel</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Ganhar energia"><div class="checkmark"></div><strong>Ganhar energia</strong><small style="display:block;margin-top:5px;">Acabar com o cansa√ßo constante</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Acelerar o metabolismo"><div class="checkmark"></div><strong>Acelerar o metabolismo</strong><small style="display:block;margin-top:5px;">Queimar mais calorias naturalmente</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Aumentar foco e concentra√ß√£o"><div class="checkmark"></div><strong>Aumentar foco e concentra√ß√£o</strong><small style="display:block;margin-top:5px;">Melhorar performance mental</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'objetivo')"><input type="checkbox" value="Melhorar sa√∫de em geral"><div class="checkmark"></div><strong>Melhorar sa√∫de em geral</strong><small style="display:block;margin-top:5px;">Bem-estar completo</small></div>
      </div>

      <div class="navigation">
        <button class="nav-btn" onclick="prevSection(2)">Voltar</button>
        <button onclick="nextSection(2)">Continuar</button>
      </div>
    </div>

    <!-- SE√á√ÉO 3: H√ÅBITOS DI√ÅRIOS -->
    <div class="section" id="section-3">
      <h2>Vamos falar sobre seus h√°bitos</h2>
      <p class="subtitle">Essas informa√ß√µes me ajudam a entender seu estilo de vida atual</p>

      <div class="checkbox-grid">
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Bebo pouca √°gua (menos de 1,5L/dia)"><div class="checkmark"></div><strong>Bebo pouca √°gua</strong><small style="display:block;margin-top:5px;">Menos de 1,5L por dia</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Como muito a√ß√∫car/doces"><div class="checkmark"></div><strong>Como muito a√ß√∫car/doces</strong><small style="display:block;margin-top:5px;">Dif√≠cil resistir √†s tenta√ß√µes</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Consumo alimentos ultraprocessados"><div class="checkmark"></div><strong>Consumo ultraprocessados</strong><small style="display:block;margin-top:5px;">Comidas prontas, embutidos, etc.</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Durmo mal ou poucas horas"><div class="checkmark"></div><strong>Durmo mal ou poucas horas</strong><small style="display:block;margin-top:5px;">Menos de 7h ou sono fragmentado</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Sou sedent√°ria"><div class="checkmark"></div><strong>Sou sedent√°ria</strong><small style="display:block;margin-top:5px;">Pouco ou nenhum exerc√≠cio</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Tenho muito estresse"><div class="checkmark"></div><strong>Tenho muito estresse</strong><small style="display:block;margin-top:5px;">Trabalho, fam√≠lia, press√£o constante</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Pulo refei√ß√µes com frequ√™ncia"><div class="checkmark"></div><strong>Pulo refei√ß√µes</strong><small style="display:block;margin-top:5px;">Caf√© da manh√£, almo√ßo ou jantar</small></div>
        <div class="checkbox-item" onclick="toggleCheckbox(this, 'habito')"><input type="checkbox" value="Bebo √°lcool regularmente"><div class="checkmark"></div><strong>Bebo √°lcool regularmente</strong><small style="display:block;margin-top:5px;">Mais de 2-3x por semana</small></div>
      </div>

      <div class="navigation">
        <button class="nav-btn" onclick="prevSection(3)">Voltar</button>
        <button onclick="nextSection(3)">Continuar</button>
      </div>
    </div>

    <!-- SE√á√ÉO 4: SINTOMAS (agora com o mesmo layout de cards) -->
    <div class="section" id="section-4">
      <h2>Autoavalia√ß√£o da Inflama√ß√£o</h2>
      <p class="subtitle">Marque os sintomas que voc√™ sente com frequ√™ncia</p>

      <div class="checkbox-grid" id="symptom-grid">
        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Barriga inchada ou gases">
          <input type="checkbox" class="sintoma" value="Intestino"><div class="checkmark"></div>
          <strong>Barriga inchada ou gases</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Constipa√ß√£o ou intestino solto">
          <input type="checkbox" class="sintoma" value="Intestino"><div class="checkmark"></div>
          <strong>Constipa√ß√£o ou intestino solto</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Acne, ros√°cea ou pele irritada">
          <input type="checkbox" class="sintoma" value="Pele"><div class="checkmark"></div>
          <strong>Acne, ros√°cea ou pele irritada</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="TPM intensa ou ciclo irregular">
          <input type="checkbox" class="sintoma" value="Hormonal"><div class="checkmark"></div>
          <strong>TPM intensa ou ciclo irregular</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dor nas articula√ß√µes">
          <input type="checkbox" class="sintoma" value="Articula√ß√µes"><div class="checkmark"></div>
          <strong>Dor nas articula√ß√µes</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Cansa√ßo excessivo ou n√©voa mental">
          <input type="checkbox" class="sintoma" value="C√©rebro"><div class="checkmark"></div>
          <strong>Cansa√ßo excessivo ou n√©voa mental</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Enjoo com alimentos gordurosos">
          <input type="checkbox" class="sintoma" value="F√≠gado"><div class="checkmark"></div>
          <strong>Enjoo com alimentos gordurosos</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dificuldade para dormir ou sono n√£o reparador">
          <input type="checkbox" class="sintoma" value="Sono"><div class="checkmark"></div>
          <strong>Dificuldade para dormir ou sono n√£o reparador</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dificuldade em perder peso">
          <input type="checkbox" class="sintoma" value="Metabolismo"><div class="checkmark"></div>
          <strong>Dificuldade em perder peso</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Gordura na regi√£o abdominal">
          <input type="checkbox" class="sintoma" value="Inflama√ß√£o hormonal"><div class="checkmark"></div>
          <strong>Gordura na regi√£o abdominal</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Acorda muito para fazer xixi">
          <input type="checkbox" class="sintoma" value="Rins"><div class="checkmark"></div>
          <strong>Acorda muito para fazer xixi</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Candid√≠ase">
          <input type="checkbox" class="sintoma" value="Microbiota"><div class="checkmark"></div>
          <strong>Candid√≠ase</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Infec√ß√£o urin√°ria">
          <input type="checkbox" class="sintoma" value="Urin√°rio"><div class="checkmark"></div>
          <strong>Infec√ß√£o urin√°ria</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dores de cabe√ßa">
          <input type="checkbox" class="sintoma" value="Neurol√≥gico"><div class="checkmark"></div>
          <strong>Dores de cabe√ßa</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dor no corpo">
          <input type="checkbox" class="sintoma" value="Muscular/Imune"><div class="checkmark"></div>
          <strong>Dor no corpo</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Alergias">
          <input type="checkbox" class="sintoma" value="Imunol√≥gico"><div class="checkmark"></div>
          <strong>Alergias</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Ressecamento vaginal">
          <input type="checkbox" class="sintoma" value="Hormonal"><div class="checkmark"></div>
          <strong>Ressecamento vaginal</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Baixa libido">
          <input type="checkbox" class="sintoma" value="Hormonal"><div class="checkmark"></div>
          <strong>Baixa libido</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="L√≠ngua esbranqui√ßada">
          <input type="checkbox" class="sintoma" value="Digestivo"><div class="checkmark"></div>
          <strong>L√≠ngua esbranqui√ßada</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Unha quebradi√ßa">
          <input type="checkbox" class="sintoma" value="Absor√ß√£o de vitaminas"><div class="checkmark"></div>
          <strong>Unha quebradi√ßa</strong>
        </div>

        <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Queda de cabelo">
          <input type="checkbox" class="sintoma" value="Tireoide"><div class="checkmark"></div>
          <strong>Queda de cabelo</strong>
        </div>
      </div>

      <div class="navigation">
        <button class="nav-btn" onclick="prevSection(4)">Voltar</button>
        <button onclick="gerarResultado()">Ver Meu Resultado</button>
      </div>
    </div>

    <!-- SE√á√ÉO 5: RESULTADO -->
    <div class="section" id="section-5">
      <div class="result" id="resultado"></div>
      <div class="whatsapp-share" id="whatsapp-share"></div>
    </div>
  </div>

  <script>
    // N√∫mero do WhatsApp (somente d√≠gitos com DDI)
    const WHATSAPP_PHONE = '16153304647';

    let currentSection = 1;
    const totalSections = 5;
    let userData = {};

    function updateProgress() {
      const progress = (currentSection / totalSections) * 100;
      document.getElementById('progress-fill').style.width = progress + '%';
      document.getElementById('progress-text').textContent = `Etapa ${currentSection} de ${totalSections}`;
    }

    function nextSection(section) {
      if (validateSection(section)) {
        document.getElementById(`section-${section}`).classList.remove('active');
        currentSection = section + 1;
        document.getElementById(`section-${currentSection}`).classList.add('active');
        updateProgress(); window.scrollTo(0, 0);
      }
    }

    function prevSection(section) {
      document.getElementById(`section-${section}`).classList.remove('active');
      currentSection = section - 1;
      document.getElementById(`section-${currentSection}`).classList.add('active');
      updateProgress(); window.scrollTo(0, 0);
    }

    function validateSection(section) {
      switch(section) {
        case 1: {
          const idade = document.getElementById('idade').value;
          const peso = document.getElementById('peso').value;
          const altura = document.getElementById('altura').value;

          if (!idade || !peso || !altura) { alert('Por favor, preencha todos os campos antes de continuar.'); return false; }
          userData.idade = idade; userData.peso = peso; userData.altura = altura;
          userData.imc = (peso / ((altura/100) ** 2)).toFixed(1);
          break;
        }
        case 2:
          if (!userData.objetivo || userData.objetivo.length === 0) { alert('Por favor, selecione pelo menos um objetivo antes de continuar.'); return false; }
          break;
        case 3:
          if (!userData.habito || userData.habito.length === 0) { alert('Por favor, selecione pelo menos um h√°bito antes de continuar.'); return false; }
          break;
        case 4:
          if (!userData.sintomas || userData.sintomas.length === 0) { alert('Por favor, selecione pelo menos um sintoma antes de continuar.'); return false; }
          break;
      }
      return true;
    }

    function toggleCheckbox(element, type) {
      const input = element.querySelector('input');
      input.checked = !input.checked;
      element.classList.toggle('selected', input.checked);
      if (!userData[type]) userData[type] = [];
      if (input.checked) {
        if (!userData[type].includes(input.value)) userData[type].push(input.value);
      } else {
        userData[type] = userData[type].filter(item => item !== input.value);
      }
    }

    // Novo handler para sintomas em cards
    function toggleSymptomCard(element) {
      const input = element.querySelector('input');
      input.checked = !input.checked;
      element.classList.toggle('selected', input.checked);

      if (!userData.sintomas) userData.sintomas = [];
      if (!userData.sintomasTexto) userData.sintomasTexto = [];

      const categoria = input.value; // ex.: "Intestino", "Hormonal"...
      const descricao = element.getAttribute('data-text') ||
                        (element.querySelector('strong') ? element.querySelector('strong').innerText.trim() : categoria);

      if (input.checked) {
        if (!userData.sintomas.includes(categoria)) userData.sintomas.push(categoria);
        if (!userData.sintomasTexto.includes(descricao)) userData.sintomasTexto.push(descricao);
      } else {
        userData.sintomas = userData.sintomas.filter(v => v !== categoria);
        userData.sintomasTexto = userData.sintomasTexto.filter(v => v !== descricao);
      }
    }

    function mensagemPonte(nivel) {
      return `
        <div class="alert-card" role="alert" aria-live="polite">
          <span class="alert-chip">Alerta</span>
          <h2 class="alert-heading"><span class="icon">üö©</span>Consequ√™ncias de adiar o cuidado</h2>
          <ul class="alert-list">
            <li>Maior resist√™ncia √† insulina e ac√∫mulo de gordura visceral.</li>
            <li>Horm√¥nios descontrolados na pr√©-menopausa, menopausa ou p√≥s menopausa.</li>
            <li>Fadiga constante e n√©voa mental que afetam o foco.</li>
            <li>Sono leve/irregular, com despertares noturnos.</li>
            <li>Pele mais reativa e intestino inst√°vel.</li>
            <li>Risco crescente de s√≠ndrome metab√≥lica.</li>
            <li>Dores articulares mais frequentes e recupera√ß√£o lenta.</li>
          </ul>
          <div class="alert-note">Quanto antes voc√™ agir, mais r√°pido seu corpo responde.</div>
        </div>
      `;
    }

    function bridgeLabel(nivel) { return ""; }

    function planoAcao(sistemasSet) {
      const itens = [];
      itens.push("Jejum estruturado e progressivo adequado ao seu n√≠vel atual.");
      if (sistemasSet.has("Intestino") || sistemasSet.has("Microbiota") || sistemasSet.has("Digestivo")) itens.push("Reset intestinal: mais fibras, √°gua, fermentados naturais e redu√ß√£o de gatilhos inflamat√≥rios.");
      if (sistemasSet.has("Sono")) itens.push("Higiene do sono: rotina noturna e ajustes de jejum para melhorar melatonina e recupera√ß√£o.");
      if (sistemasSet.has("Metabolismo") || sistemasSet.has("Inflama√ß√£o hormonal") || sistemasSet.has("Tireoide")) itens.push("Controle hormonal e glic√™mico: janela alimentar, prote√≠na '√¢ncora' e combina√ß√£o certa de macros.");
      if (sistemasSet.has("F√≠gado")) itens.push("Suporte hep√°tico via alimenta√ß√£o: menos ultraprocessados, ajustes de gordura e intervalos corretos.");
      if (sistemasSet.has("Articula√ß√µes") || sistemasSet.has("Muscular/Imune")) itens.push("Anti-inflamat√≥rio com jejum e alimenta√ß√£o correta.");
      if (sistemasSet.has("C√©rebro") || sistemasSet.has("Neurol√≥gico")) itens.push("Clareza mental e energia: janelas est√°veis, hidrata√ß√£o e refei√ß√µes corretas para te dar energia e clareza mental.");
      if (sistemasSet.has("Urin√°rio") || sistemasSet.has("Rins")) itens.push("Jejum √© o melhor anti-inflamat√≥rio que existe.");
      if (sistemasSet.has("Absor√ß√£o de vitaminas")) itens.push("Mudan√ßas alimentares para otimizar a absor√ß√£o de vitaminas e minerais vindos dos alimentos.");
      if (sistemasSet.has("Pele")) itens.push("Pele mais calma: cuidados para equilibrar seu corpo e desinflamar de dentro para fora.");
      return itens.map(t => `<li>${t}</li>`).join("");
    }

    function gerarResultado() {
      if (validateSection(4)) {
        document.getElementById(`section-4`).classList.remove('active');
        currentSection = 5;
        document.getElementById(`section-5`).classList.add('active');
        updateProgress();

        const numSintomas = userData.sintomas.length;
        let nivel = "", mensagem = "";
        if (numSintomas <= 2) { nivel = "Leve üíõ"; mensagem = "Seu corpo est√° mostrando sinais leves. A preven√ß√£o √© o melhor caminho!"; }
        else if (numSintomas <= 3) { nivel = "Moderada üü†"; mensagem = "A inflama√ß√£o est√° se espalhando. √â hora de cuidar de voc√™ com mais aten√ß√£o."; }
        else { nivel = "Alta üî¥"; mensagem = "Sinais de inflama√ß√£o sist√™mica! Vamos aliviar essa sobrecarga e restaurar seu equil√≠brio."; }

        const unicosSistemas = [...new Set(userData.sintomas)].join(', ');
        const listaSintomas = userData.sintomasTexto.join(', ');

        const ponte = mensagemPonte(nivel);

        const htmlResultado = `
          <h3>Seu Resultado Personalizado</h3>

          <div class="result-section">
            <h4>Dados Pessoais</h4>
            <p><strong>Idade:</strong> ${userData.idade} anos</p>
            <p><strong>Peso:</strong> ${userData.peso} kg</p>
            <p><strong>Altura:</strong> ${userData.altura} cm</p>
          </div>

          <div class="result-section">
            <h4>Objetivos</h4>
            <ul>${userData.objetivo ? userData.objetivo.map(item => `<li>${item}</li>`).join('') : '<li>Nenhum selecionado</li>'}</ul>
          </div>

          <div class="result-section">
            <h4>H√°bitos</h4>
            <ul>${userData.habito ? userData.habito.map(item => `<li>${item}</li>`).join('') : '<li>Nenhum selecionado</li>'}</ul>
          </div>

          <div class="result-section">
            <h4>N√≠vel de Inflama√ß√£o</h4>
            <p><strong>N√≠vel:</strong> ${nivel}</p>
            <p>${mensagem}</p>
          </div>

          <div class="result-section">
            <h4>√ìrg√£os/Sistemas Afetados</h4>
            <p>${unicosSistemas}</p>
          </div>

          <div class="result-section">
            <h4>Sintomas Identificados</h4>
            <p>${listaSintomas}</p>
          </div>

          <div class="bridge">
            ${bridgeLabel(nivel) ? `<strong>${bridgeLabel(nivel)}</strong>` : ""}
            ${ponte}
          </div>
        `;
        document.getElementById('resultado').innerHTML = htmlResultado;

        // Se existir UL de plano, preenche (opcional)
        const ul = document.getElementById('plano-ul');
        if (ul) ul.innerHTML = planoAcao(new Set(userData.sintomas));

        // WhatsApp com Objetivos e H√°bitos inclu√≠dos
        const objetivosLista = (userData.objetivo && userData.objetivo.length)
          ? userData.objetivo.join(', ')
          : '‚Äî';

        const habitosLista = (userData.habito && userData.habito.length)
          ? userData.habito.join(', ')
          : '‚Äî';

        const textoWhatsapp =
          `Fiz a autoavalia√ß√£o da inflama√ß√£o e o resultado foi: ${nivel}.\n` +
          `√ìrg√£os/sistemas afetados: ${unicosSistemas || '‚Äî'}.\n` +
          `Sintomas que marquei: ${listaSintomas || '‚Äî'}.\n` +
          `Objetivos: ${objetivosLista}.\n` +
          `H√°bitos: ${habitosLista}.\n\n` +
          `Quero ajuda para equilibrar meu corpo com alimenta√ß√£o!`;

        const linkWhatsapp = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(textoWhatsapp)}`;

        document.getElementById('whatsapp-share').innerHTML = `
          <a class="whatsapp-button" href="${linkWhatsapp}" target="_blank" rel="noopener" aria-label="Enviar resultado pelo WhatsApp">
            üí¨ üëâEnviar meu resultado para o WhatsApp da Nutri para ela avaliar
          </a>
        `;

        window.scrollTo(0, 0);
      }
    }
  </script>
</body>
</html>
